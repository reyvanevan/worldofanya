<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seed Firestore Data</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-900 text-white min-h-screen flex items-center justify-center p-8">
    <div class="max-w-2xl w-full">
        <h1 class="text-3xl font-bold mb-6 text-center">üå± Seed Firestore Data</h1>
        <p class="text-slate-400 text-center mb-8">Upload initial data for World of Anya dashboard</p>
        
        <div id="status" class="space-y-3 mb-8"></div>
        
        <div class="grid grid-cols-2 gap-4 mb-4">
            <button onclick="seedGalleryOnly()" id="seedGalleryBtn" class="py-4 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl font-bold text-lg hover:opacity-90 transition">
                üñºÔ∏è Seed Gallery Only
            </button>
            <button onclick="seedData()" id="seedBtn" class="py-4 bg-gradient-to-r from-pink-500 to-purple-600 rounded-xl font-bold text-lg hover:opacity-90 transition">
                üöÄ Seed All Data
            </button>
        </div>
        
        <div class="mb-4">
            <button onclick="seedLoveProgress()" id="seedLoveBtn" class="w-full py-4 bg-gradient-to-r from-rose-500 via-pink-500 to-purple-500 rounded-xl font-bold text-lg hover:opacity-90 transition shadow-lg shadow-pink-500/30">
                üíï Seed Love Progress (Dec 11, 2025 - 20%)
            </button>
            <p class="text-pink-300 text-xs text-center mt-2 italic">"intinya aku ga minta apa apa, aku cm minta km tepati ketikan dan omongan kamu üòä cukup itu"</p>
        </div>
        
        <div class="mb-4">
            <button onclick="seedSasukeImage()" id="seedSasukeBtn" class="w-full py-3 bg-gradient-to-r from-slate-600 to-slate-800 rounded-xl font-bold text-lg hover:opacity-90 transition">
                üñ§ Seed Sasuke Image (0% Marker)
            </button>
        </div>
        
        <p class="text-amber-400 text-sm text-center mb-4">‚ö†Ô∏è "Seed All Data" akan overwrite semua data. Gunakan "Seed Gallery Only" untuk update gallery tanpa menghapus data lain.</p>
        
        <div class="mt-8 p-4 bg-slate-800 rounded-xl">
            <h3 class="font-bold mb-2">Data Structure:</h3>
            <pre id="dataPreview" class="text-xs text-slate-400 overflow-auto max-h-96"></pre>
        </div>
    </div>

    <script type="module">
        import { db } from '../js/firebase-config.js';
        import { doc, setDoc, collection } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // Data structure for World of Anya
        const seedData = {
            // Profile/Hero Section
            profile: {
                name: "Zalfa Nazhifah",
                bio: "Dia bukan sekadar nama. Dia adalah Zalfa Nazhifah. Lahir 24 Juli 2005, membawa warna biru dan pink ke dalam hidup seseorang yang pernah kehilangan arah.",
                photo: "https://images.unsplash.com/photo-1517841905240-472988babdf9?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
                tags: ["BlueSoul", "PinkHeart", "MyUniverse"],
                updatedAt: new Date()
            },

            // Stats
            stats: {
                totalVisits: 1240,
                memoriesCount: 42,
                startDate: new Date("2024-06-01"), // Relationship start date
                updatedAt: new Date()
            },

            // Gallery Images
            gallery: [
                {
                    id: 1,
                    url: "https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?ixlib=rb-1.2.1&auto=format&fit=crop&w=400&q=80",
                    caption: "The Smile",
                    order: 1
                },
                {
                    id: 2,
                    url: "https://images.unsplash.com/photo-1516975080664-ed2fc6a32937?ixlib=rb-1.2.1&auto=format&fit=crop&w=400&q=80",
                    caption: "Our Fav Place",
                    order: 2
                },
                {
                    id: 3,
                    url: "https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&auto=format&fit=crop&w=400&q=80",
                    caption: "Laughed",
                    order: 3
                },
                {
                    id: 4,
                    url: "https://images.unsplash.com/photo-1534528741775-53994a69daeb?ixlib=rb-1.2.1&auto=format&fit=crop&w=400&q=80",
                    caption: "Cantik Bgt",
                    order: 4
                }
            ],

            // Memories Cards
            memories: [
                {
                    id: 1,
                    title: "Senyum Kamu",
                    description: "Momen dimana kamu ketawa lepas. Di detik itu, dunia rasanya berhenti berputar cuma buat ngeliat kamu bahagia.",
                    icon: "smile",
                    iconColor: "pink",
                    image: "https://images.unsplash.com/photo-1516975080664-ed2fc6a32937?ixlib=rb-1.2.1&auto=format&fit=crop&w=400&q=80",
                    order: 1
                },
                {
                    id: 2,
                    title: "Kebaikan Kamu",
                    description: "Cara kamu peduli sama hal-hal kecil. Itu yang bikin kamu beda dari semua orang yang pernah aku kenal.",
                    icon: "heart",
                    iconColor: "blue",
                    image: "https://images.unsplash.com/photo-1534528741775-53994a69daeb?ixlib=rb-1.2.1&auto=format&fit=crop&w=400&q=80",
                    order: 2
                },
                {
                    id: 3,
                    title: "Masa Depan?",
                    description: "Space kosong ini buat kenangan kita selanjutnya. Kalau kamu ijinin aku buat ngisi lembaran ini lagi.",
                    icon: "sparkles",
                    iconColor: "yellow",
                    image: null,
                    order: 3
                }
            ],

            // Secret Letter
            letter: {
                title: "Hai Anya...",
                content: "Aku tau kata-kata nggak akan pernah cukup. Tapi aku harap website ini bisa jadi bukti kecil kalau aku bener-bener serius.\n\nTerima kasih udah kasih ruang buat aku memperbaiki diri. Take your time. Aku bakal tetep di sini, ngejaga janji ini.",
                quote: "I love you, today and forever.",
                updatedAt: new Date()
            },

            // Users with roles
            users: {
                rey: {
                    uid: "rey-guardian",
                    email: "reyvan@ganteng.com",
                    displayName: "M Reyvan Purnama",
                    role: "guardian",
                    greeting: "Welcome home, Guardian.",
                    avatar: "https://ui-avatars.com/api/?name=Rey&background=0D8ABC&color=fff",
                    canEdit: ["profile-anya", "gallery", "memories", "letter", "profile-rey"],
                    createdAt: new Date()
                },
                anya: {
                    uid: "anya-princess", 
                    email: "sayang@anya.com",
                    displayName: "Zalfa Nazhifah",
                    role: "princess",
                    greeting: "Hi beautiful, how was your day?",
                    avatar: "https://ui-avatars.com/api/?name=Anya&background=EC4899&color=fff",
                    canEdit: ["stickers", "highlights-anya"],
                    createdAt: new Date()
                }
            },

            // Him Profile (Rey's profile for him.html)
            profileRey: {
                name: "Reyvan Azhari",
                title: "The Observer",
                bio: "Just a guy who's trying his best to be the person she deserves. Everyday is a chance to be better.",
                photo: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
                tags: ["HerGuardian", "WorkInProgress", "LovesHer"],
                stickers: [], // Anya can add stickers here
                highlights: [
                    { name: "Her", icon: "camera", gradient: "from-pink-400 to-rose-300", iconColor: "text-pink-500" },
                    { name: "Grind", icon: "briefcase", gradient: "from-slate-700 to-slate-400", iconColor: "text-slate-600 dark:text-slate-400" },
                    { name: "Tech", icon: "cpu", gradient: "from-blue-500 to-cyan-400", iconColor: "text-blue-500" },
                    { name: "Vibe", icon: "headphones", gradient: "from-emerald-400 to-green-300", iconColor: "text-emerald-500" }
                ],
                gallery: [
                    { id: 1, url: "https://images.unsplash.com/photo-1488161628813-99c974c76949?w=500&q=80", caption: "My View", showOnProfile: true },
                    { id: 2, url: "https://images.unsplash.com/photo-1504609773096-104ff2c73ba4?w=500&q=80", caption: "Adventure", showOnProfile: true },
                    { id: 3, url: "https://images.unsplash.com/photo-1519125323398-675f0ddb6308?w=500&q=80", caption: "Sunset", showOnProfile: true }
                ],
                updatedAt: new Date()
            },

            // Her Profile (Princess profile for her.html)
            profileHer: {
                name: "Zalfa Nazhifah",
                title: "The Main Character",
                bio: "She is the poem I never knew how to write, and this life is the paper.",
                photo: "https://images.unsplash.com/photo-1534528741775-53994a69daeb?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
                highlights: [
                    { name: "Dates", icon: "heart", gradient: "from-brand-accent to-purple-400", iconColor: "text-pink-500" },
                    { name: "Trips", icon: "plane", gradient: "from-blue-400 to-cyan-300", iconColor: "text-blue-500" },
                    { name: "Food", icon: "coffee", gradient: "from-amber-400 to-orange-300", iconColor: "text-amber-600" },
                    { name: "Silly", icon: "smile", gradient: "from-emerald-400 to-teal-300", iconColor: "text-emerald-500" }
                ],
                gallery: [
                    { id: 1, url: "https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=500&q=80", caption: "Portrait", showOnProfile: true },
                    { id: 2, url: "https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=500&q=80", caption: "Smile", showOnProfile: true },
                    { id: 3, url: "https://images.unsplash.com/photo-1488426862026-3ee34a7d66df?w=500&q=80", caption: "Candid", showOnProfile: true },
                    { id: 4, url: "https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=500&q=80", caption: "Beautiful", showOnProfile: true }
                ],
                updatedAt: new Date()
            },
            
            // Sasuke Image (for love progress 0%)
            sasukeImage: {
                url: "data:image/jpeg;base64,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",
                name: "Sasuke Uchiha",
                description: "0% - Stranger/Friendzone marker",
                updatedAt: new Date()
            }
        };

        // Show data preview
        document.getElementById('dataPreview').textContent = JSON.stringify(seedData, null, 2);

        // Seed Love Progress - Dec 11, 2024 at 20%
        window.seedLoveProgress = async function() {
            const btn = document.getElementById('seedLoveBtn');
            const status = document.getElementById('status');
            
            btn.disabled = true;
            btn.textContent = '‚è≥ Uploading Love Progress...';
            status.innerHTML = '';

            const addStatus = (message, success = true) => {
                const div = document.createElement('div');
                div.className = `p-3 rounded-lg ${success ? 'bg-green-900/50 text-green-400' : 'bg-red-900/50 text-red-400'}`;
                div.innerHTML = `${success ? '‚úÖ' : '‚ùå'} ${message}`;
                status.appendChild(div);
            };

            try {
                // Create initial love progress data
                const loveProgressData = {
                    currentProgress: 20,
                    lastUpdate: new Date('2025-12-11T22:30:00+07:00'),
                    lastUpdatedBy: 'anya',
                    history: [
                        {
                            date: new Date('2025-12-11T22:30:00+07:00'),
                            value: 20,
                            note: 'Ada sesuatu yang mulai kembali...'
                        }
                    ],
                    visitorCount: 0
                };

                await setDoc(doc(db, "landing", "loveProgress"), loveProgressData);
                addStatus('üíï Love Progress seeded: 20% (Dec 11, 2025)');
                addStatus('"intinya aku ga minta apa apa, aku cm minta km tepati ketikan dan omongan kamu üòä cukup itu"');

                btn.className = 'w-full py-4 bg-green-600 rounded-xl font-bold text-lg';
                btn.textContent = '‚úÖ Love Progress Seeded!';

            } catch (error) {
                console.error('Seed love progress error:', error);
                addStatus(`Error: ${error.message}`, false);
                btn.className = 'w-full py-4 bg-red-600 rounded-xl font-bold text-lg';
                btn.textContent = '‚ùå Failed';
            }
        };

        // Seed Sasuke Image - Independent document for love progress
        window.seedSasukeImage = async function() {
            const btn = document.getElementById('seedSasukeBtn');
            const status = document.getElementById('status');
            
            btn.disabled = true;
            btn.textContent = '‚è≥ Uploading Sasuke Image...';
            status.innerHTML = '';

            const addStatus = (message, success = true) => {
                const div = document.createElement('div');
                div.className = `p-3 rounded-lg ${success ? 'bg-green-900/50 text-green-400' : 'bg-red-900/50 text-red-400'}`;
                div.innerHTML = `${success ? '‚úÖ' : '‚ùå'} ${message}`;
                status.appendChild(div);
            };

            try {
                await setDoc(doc(db, "landing", "sasukeImage"), seedData.sasukeImage);
                addStatus('üñ§ Sasuke image seeded (0% marker for love progress)');
                addStatus('Image stored as base64 - no external dependencies');

                btn.className = 'w-full py-3 bg-green-600 rounded-xl font-bold text-lg';
                btn.textContent = '‚úÖ Sasuke Image Seeded!';

            } catch (error) {
                console.error('Seed sasuke image error:', error);
                addStatus(`Error: ${error.message}`, false);
                btn.className = 'w-full py-3 bg-red-600 rounded-xl font-bold text-lg';
                btn.textContent = '‚ùå Failed';
            }
        };

        // Seed Gallery Only - uses merge to preserve existing data
        window.seedGalleryOnly = async function() {
            const btn = document.getElementById('seedGalleryBtn');
            const status = document.getElementById('status');
            
            btn.disabled = true;
            btn.textContent = '‚è≥ Uploading...';
            status.innerHTML = '';

            const addStatus = (message, success = true) => {
                const div = document.createElement('div');
                div.className = `p-3 rounded-lg ${success ? 'bg-green-900/50 text-green-400' : 'bg-red-900/50 text-red-400'}`;
                div.innerHTML = `${success ? '‚úÖ' : '‚ùå'} ${message}`;
                status.appendChild(div);
            };

            try {
                // Update profileHer gallery only (merge: true preserves other fields)
                await setDoc(doc(db, "landing", "profileHer"), {
                    gallery: seedData.profileHer.gallery,
                    updatedAt: new Date()
                }, { merge: true });
                addStatus('Princess gallery updated (profileHer)');

                // Update profileRey gallery only (merge: true preserves other fields)
                await setDoc(doc(db, "landing", "profileRey"), {
                    gallery: seedData.profileRey.gallery,
                    updatedAt: new Date()
                }, { merge: true });
                addStatus('Guardian gallery updated (profileRey)');

                btn.className = 'py-4 bg-green-600 rounded-xl font-bold text-lg';
                btn.textContent = '‚úÖ Gallery Seeded!';

            } catch (error) {
                console.error('Seed gallery error:', error);
                addStatus(`Error: ${error.message}`, false);
                btn.className = 'py-4 bg-red-600 rounded-xl font-bold text-lg';
                btn.textContent = '‚ùå Failed';
            }
        };

        // Seed All function
        window.seedData = async function() {
            const btn = document.getElementById('seedBtn');
            const status = document.getElementById('status');
            
            btn.disabled = true;
            btn.textContent = '‚è≥ Uploading...';
            status.innerHTML = '';

            const addStatus = (message, success = true) => {
                const div = document.createElement('div');
                div.className = `p-3 rounded-lg ${success ? 'bg-green-900/50 text-green-400' : 'bg-red-900/50 text-red-400'}`;
                div.innerHTML = `${success ? '‚úÖ' : '‚ùå'} ${message}`;
                status.appendChild(div);
            };

            try {
                // 1. Upload Profile
                await setDoc(doc(db, "landing", "profile"), seedData.profile);
                addStatus('Profile data uploaded');

                // 2. Upload Stats
                await setDoc(doc(db, "landing", "stats"), seedData.stats);
                addStatus('Stats data uploaded');

                // 3. Upload Gallery
                await setDoc(doc(db, "landing", "gallery"), { items: seedData.gallery });
                addStatus('Gallery data uploaded');

                // 4. Upload Memories
                await setDoc(doc(db, "landing", "memories"), { items: seedData.memories });
                addStatus('Memories data uploaded');

                // 5. Upload Letter
                await setDoc(doc(db, "landing", "letter"), seedData.letter);
                addStatus('Letter data uploaded');

                // 6. Upload Users (for role-based personalization)
                await setDoc(doc(db, "users", "rey"), seedData.users.rey);
                addStatus('User Rey uploaded');
                await setDoc(doc(db, "users", "anya"), seedData.users.anya);
                addStatus('User Anya uploaded');

                // 7. Upload Profile Rey
                await setDoc(doc(db, "landing", "profileRey"), seedData.profileRey);
                addStatus('Profile Rey data uploaded');

                // 8. Upload Profile Her (Princess)
                await setDoc(doc(db, "landing", "profileHer"), seedData.profileHer);
                addStatus('Profile Her (Princess) data uploaded');

                btn.className = 'w-full py-4 bg-green-600 rounded-xl font-bold text-lg';
                btn.textContent = '‚úÖ All Data Seeded Successfully!';

            } catch (error) {
                console.error('Seed error:', error);
                addStatus(`Error: ${error.message}`, false);
                btn.className = 'w-full py-4 bg-red-600 rounded-xl font-bold text-lg';
                btn.textContent = '‚ùå Seeding Failed';
            }
        };
    </script>
</body>
</html>
